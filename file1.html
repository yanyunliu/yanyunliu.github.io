<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge"/>
<title>Untitled</title>
<script type="text/javascript" data-dojo-config="'parseOnLoad':true,'async':true,'packages':[{'name':'gridx','location':'../gridx'},{'name':'clipart','location':'../../clipart'},{'name':'maqettaSamples','location':'../../../samples'},{'name':'maqetta','location':'../../maqetta'},{'name':'shapes','location':'../../shapes'},{'name':'zazl','location':'../../zazl'},{'name':'widgets','location':'../../custom'}],'themeMap':[['Android','',['themes/android/android.css']],['BlackBerry','',['themes/blackberry/blackberry.css']],['iPad','',['themes/ipad/ipad.css']],['iPhone','',['themes/iphone/iphone.css']],['.*','',['themes/iphone/iphone.css']]],'mblThemeFiles':[],'mblLoadCompatPattern':''" src="lib/dojo/dojo/dojo.js"></script>
<script type="text/javascript">
require([
  "dijit/dijit",
  "dojo/parser",
  "maqetta/space",
  "maqetta/AppStates",
  "dojox/mobile",
  "dojox/mobile/deviceTheme",
  "dojo/hash",
  "dojox/mobile/ScrollableView",
  "shapes/Circle"
]);
</script>
<style>@import "themes/claro/claro.css";@import "app.css";
</style>
<script type="text/javascript" src="app.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no"></meta>

<script>
 var msg = "您可以上传png, jpg, 或者gif格式的图片";
 var filter = {
 "jpeg": "/9j/4",
 "gif": "R0lGOD",
 "png": "iVBORw"
 };
 function preview(file) {
 var container = document.getElementById("container");
 container.innerHTML = "";
 if (window.FileReader) {
 for (var index=0, f; f = file.files[index]; index++) {
 
 var filereader = new FileReader();
 filereader.onload = function (event) {
  var srcpath = event.target.result;
  if (!validateImg(srcpath)) {
  console.log("H5"+msg);
  } else {
  showPreviewImage(srcpath);
  }
 };
 filereader.readAsDataURL(f);
 }
 } else {
 if (!/\.jpg$|\.png$|\.gif$/i.test(file.value)) {
 console.log("原生"+msg);
 } else {
 showPreviewImage(file.value);
 }
 }
 }
 
 function validateImg(data) {
 console.log(data);
 var pos = data.indexOf(",") + 1;
 for (var e in filter) {
 if (data.indexOf(filter[e]) === pos) {
 return e;
 }
 }
 return null;
 }
 
 function showPreviewImage(src) {
 console.log(src);
 
 
 var img = document.createElement('img');
 img.src = src;
 img.style = "width:64px;height:auto;"
 container.appendChild(img);
 }
 
</script>

</head>
<body data-maq-device="android_480x800" data-maq-flow-layout="false" data-maq-comptype="mobile" class="claro" data-maq-ws="collapse" data-maq-appstates="{}" id="myapp">
 <h1 label="欢迎来到吉林大学拍照导航系统" data-dojo-type="dojox/mobile/Heading" style="background-color: white;"></h1>
 <div id="ScrollableView_0" data-dojo-type="dojox/mobile/ScrollableView" selected="true" style="border: none; background-image: url('img/jlu.jpg'); background-position: center center; background-size: 100%;">
  <div data-dojo-type="shapes/Circle" style="border-width: 3px; border-style: solid; border-color: black; position: absolute; z-index: 900; width: 89px; border-bottom-left-radius: 50.5px 51px; background-position: center center; background-size: 100% auto; height: 90px; left: 192.667px; top: 610.334px; background-image: url(&quot;return.png&quot;);" onclick="location.href='index.html'"></div>


 <form action="#" method="POST">
 <legend>
 图片上传
 </legend>
 <fieldset>
 <input type="file" name="pic1" id="pic1" onchange="preview(this)" multiple="multiple" accept="image/x-png, image/jpg, image/jpeg, image/gif">
 <br><br>
 </br>
 <input type="button" value="上传">
</input>
<div id="container">


</div>
</br>
</input>
</fieldset></form></div></body></html>